<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhotoCull Pro - Professional Photo Culling</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-camera me-2"></i>PhotoCull Pro
            </a>
            <div class="navbar-nav ms-auto">
                <div class="nav-item me-3">
                    <span class="text-light">
                        Total: <span id="total-count" class="badge bg-light text-dark">0</span>
                        Selected: <span id="selected-count" class="badge bg-success">0</span>
                        Rejected: <span id="rejected-count" class="badge bg-danger">0</span>
                    </span>
                </div>
                <button class="btn btn-outline-light btn-sm me-2" id="export-btn">
                    <i class="fas fa-download"></i> Export
                </button>
                <button class="btn btn-light btn-sm" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 col-md-4 sidebar-container">
                <div class="sidebar p-3">
                    <!-- Upload Section -->
                    <div class="mb-4">
                        <h5>Upload Photos</h5>
                        <div class="upload-area border-dashed p-4 text-center" id="upload-area">
                            <i class="fas fa-cloud-upload-alt fa-2x mb-2"></i>
                            <p>Drag & drop photos here</p>
                            <button class="btn btn-primary btn-sm" id="select-files">
                                Select Files
                            </button>
                            <input type="file" id="file-input" multiple accept="image/*" style="display: none;">
                        </div>
                        <button class="btn btn-info btn-sm mt-2 w-100" id="load-sample">
                            Load Sample Images
                        </button>
                    </div>

                    <!-- Filters -->
                    <div class="mb-4">
                        <h6>Filters & Sorting</h6>
                        <div class="mb-2">
                            <label class="form-label small">Sort by:</label>
                            <select class="form-select form-select-sm" id="sort-select">
                                <option value="filename">Filename</option>
                                <option value="rating">Rating</option>
                                <option value="quality_score">Quality Score</option>
                                <option value="focus_score">Focus Score</option>
                                <option value="upload_timestamp">Upload Time</option>
                            </select>
                        </div>
                        <div class="mb-2">
                            <label class="form-label small">Rating:</label>
                            <select class="form-select form-select-sm" id="rating-filter">
                                <option value="all">All Ratings</option>
                                <option value="0">Unrated</option>
                                <option value="1">1 Star</option>
                                <option value="2">2 Stars</option>
                                <option value="3">3 Stars</option>
                                <option value="4">4 Stars</option>
                                <option value="5">5 Stars</option>
                            </select>
                        </div>
                        <div class="mb-2">
                            <label class="form-label small">Label:</label>
                            <select class="form-select form-select-sm" id="label-filter">
                                <option value="all">All Labels</option>
                                <option value="none">Unlabeled</option>
                                <option value="selected">Selected</option>
                                <option value="rejected">Rejected</option>
                                <option value="review">Review</option>
                            </select>
                        </div>
                    </div>

                    <!-- Quality Thresholds -->
                    <div class="mb-4">
                        <h6>Quality Thresholds</h6>
                        <div class="mb-2">
                            <label class="form-label small">Focus Threshold:</label>
                            <input type="range" class="form-range" id="focus-threshold" min="0" max="100" value="0">
                            <small class="text-muted" id="focus-threshold-value">0</small>
                        </div>
                        <div class="mb-2">
                            <label class="form-label small">Exposure Threshold:</label>
                            <input type="range" class="form-range" id="exposure-threshold" min="0" max="100" value="0">
                            <small class="text-muted" id="exposure-threshold-value">0</small>
                        </div>
                    </div>

                    <!-- Batch Actions -->
                    <div class="mb-4">
                        <h6>Batch Actions</h6>
                        <div class="btn-group-vertical w-100">
                            <button class="btn btn-success btn-sm" id="select-all">Select All Visible</button>
                            <button class="btn btn-danger btn-sm" id="reject-all">Reject All Visible</button>
                            <button class="btn btn-secondary btn-sm" id="clear-all">Clear All Ratings</button>
                        </div>
                    </div>

                    <!-- Processing Status -->
                    <div class="processing-status" id="processing-status" style="display: none;">
                        <h6>Processing...</h6>
                        <div class="progress mb-2">
                            <div class="progress-bar" id="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                        <small class="text-muted" id="progress-text">Analyzing images...</small>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9 col-md-8">
                <div class="main-content p-3">
                    <!-- View Controls -->
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary active" id="grid-view" data-view="grid">
                                <i class="fas fa-th-large"></i> Grid
                            </button>
                            <button class="btn btn-outline-primary" id="compare-view" data-view="compare">
                                <i class="fas fa-columns"></i> Compare
                            </button>
                        </div>
                        <div class="thumbnail-size-control">
                            <label class="form-label small me-2">Thumbnail Size:</label>
                            <input type="range" class="form-range" id="thumbnail-size" min="150" max="400" value="250" style="width: 120px; display: inline-block;">
                        </div>
                    </div>

                    <!-- Image Grid -->
                    <div id="image-grid" class="image-grid">
                        <!-- Image cards will be rendered here -->
                    </div>
                    <div class="welcome-message text-center p-5" id="welcome-message">
                        <i class="fas fa-images fa-4x text-muted mb-3"></i>
                        <h4>Welcome to PhotoCull Pro</h4>
                        <p class="text-muted">Upload photos to begin professional culling with AI-powered analysis</p>
                    </div>

                    <!-- Compare View -->
                    <div id="compare-container" class="compare-container" style="display: none;">
                        <div class="row">
                            <div class="col-md-6" id="compare-left">
                                <div class="compare-placeholder">
                                    <p class="text-muted">Select first image to compare</p>
                                </div>
                            </div>
                            <div class="col-md-6" id="compare-right">
                                <div class="compare-placeholder">
                                    <p class="text-muted">Select second image to compare</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Preview Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-filename"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-8">
                            <img id="modal-image" class="img-fluid" src="" alt="">
                        </div>
                        <div class="col-lg-4">
                            <div class="image-details">
                                <h6>Rating & Labels</h6>
                                <div class="rating-controls mb-3">
                                    <div class="btn-group" role="group" id="rating-buttons">
                                        <button class="btn btn-outline-warning btn-sm rating-btn" data-rating="1">1⭐</button>
                                        <button class="btn btn-outline-warning btn-sm rating-btn" data-rating="2">2⭐</button>
                                        <button class="btn btn-outline-warning btn-sm rating-btn" data-rating="3">3⭐</button>
                                        <button class="btn btn-outline-warning btn-sm rating-btn" data-rating="4">4⭐</button>
                                        <button class="btn btn-outline-warning btn-sm rating-btn" data-rating="5">5⭐</button>
                                    </div>
                                </div>
                                <div class="label-controls mb-3">
                                    <div class="btn-group" role="group">
                                        <button class="btn btn-outline-success btn-sm label-btn" data-label="selected">✓ Select</button>
                                        <button class="btn btn-outline-danger btn-sm label-btn" data-label="rejected">✗ Reject</button>
                                        <button class="btn btn-outline-info btn-sm label-btn" data-label="review">? Review</button>
                                    </div>
                                </div>

                                <h6>Analysis Results</h6>
                                <div class="analysis-results" id="analysis-results">
                                    <!-- Analysis data will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal fade" id="exportModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Export Selected Images</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Export Type:</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="exportType" value="copy" checked>
                            <label class="form-check-label">Copy selected images</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="exportType" value="metadata">
                            <label class="form-check-label">Export metadata only (CSV)</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirm-export">Export</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Help -->
    <div class="keyboard-shortcuts" id="shortcuts-help">
        <div class="shortcuts-content">
            <h6>Keyboard Shortcuts</h6>
            <div class="row">
                <div class="col-6">
                    <small><kbd>1-5</kbd> Rate image</small><br>
                    <small><kbd>G</kbd> Select (green)</small><br>
                    <small><kbd>R</kbd> Reject (red)</small><br>
                    <small><kbd>Y</kbd> Review (yellow)</small><br>
                </div>
                <div class="col-6">
                    <small><kbd>→</kbd> Next image</small><br>
                    <small><kbd>←</kbd> Previous image</small><br>
                    <small><kbd>Space</kbd> Open preview</small><br>
                    <small><kbd>Esc</kbd> Close modal</small><br>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
